# üê≥ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä.

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ macOS ‚Üí –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç macOS-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—É—Ç–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –î–µ–ø–ª–æ–π –Ω–∞ Linux ‚Üí –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É
- SQLite –±–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ Mac ‚Üí —Ñ–æ—Ä–º–∞—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (Linux –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
- –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –Ω–∞ Mac –≤ IDE (—É–¥–æ–±–Ω–æ)
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Linux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- –û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ ‚Üí –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç

## üèóÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Mac (—Ç–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  IDE                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –∫–æ–¥ –∑–¥–µ—Å—å)         ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ           ‚Üì (volumes)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Linux)         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Swift –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–¥–µ—Å—å ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (swift run)                 ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. **–ö–æ–¥ –Ω–∞ Mac** ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –≤ IDE –∫–∞–∫ –æ–±—ã—á–Ω–æ
2. **Volumes** ‚Üí Docker –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –ø–∞–ø–∫–∏ —Å –∫–æ–¥–æ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. **–ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ** ‚Üí `swift run` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Linux –æ–∫—Ä—É–∂–µ–Ω–∏–∏
4. **–û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ** ‚Üí –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –ª–æ–∫–∞–ª—å–Ω–æ

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### 1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
docker --version
```

**–ï—Å–ª–∏ Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω:**
- –û—Ç–∫—Ä–æ–π Docker Desktop –∏–∑ Applications
- –î–æ–∂–¥–∏—Å—å –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ (–∏–∫–æ–Ω–∫–∞ Docker –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –º–∏–≥–∞—Ç—å)
- Docker daemon –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É "Cannot connect to the Docker daemon":**
- Docker Desktop –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚Äî –æ—Ç–∫—Ä–æ–π –µ–≥–æ –≤—Ä—É—á–Ω—É—é
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Docker Desktop –ø–æ–¥–æ–∂–¥–∏ 10-20 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ daemon –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
docker ps
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫ ‚Äî Docker –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

### 2. –ó–∞–ø—É—Å—Ç–∏ nginx (reverse proxy –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)

```bash
brew services start nginx
```

Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8080 –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Docker-—Å–µ—Ä–≤–∏—Å—ã –ø–æ –ø—É—Ç—è–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω ngrok URL –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤.

### 3. –°–æ–∑–¥–∞–π –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç)

```bash
mkdir -p Roundsvideobot/Resources/temporaryvideoFiles
mkdir -p Neurfotobot/tmp
```

### 4. –ó–∞–ø—É—Å—Ç–∏ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç–µ—Å—Ç–∞

```bash
docker compose -f docker-compose.dev.yml up nowcontrollerbot
```

### 5. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[ INFO ] Server started on http://0.0.0.0:8084
```

### 6. –û—Å—Ç–∞–Ω–æ–≤–∏ (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
docker compose -f docker-compose.dev.yml up
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Telegrambot/
‚îú‚îÄ‚îÄ docker-compose.dev.yml    # ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ Dockerfile.dev            # ‚Üê Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ docker-compose.prod.yml   # ‚Üê –î–ª—è production (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
‚îú‚îÄ‚îÄ Dockerfile.prod           # ‚Üê –î–ª—è production (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
‚îî‚îÄ‚îÄ [–ø–∞–ø–∫–∏ —Å –±–æ—Ç–∞–º–∏]/
    ‚îî‚îÄ‚îÄ Sources/App/          # ‚Üê –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –∑–¥–µ—Å—å (–Ω–∞ Mac)
```

---

## üìù –û–±—ã—á–Ω—ã–π workflow

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

1. **–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   docker compose -f docker-compose.dev.yml up neurfotobot
   ```

2. **–†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–¥ –≤ IDE** (–∫–∞–∫ –æ–±—ã—á–Ω–æ)

3. **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏:**
   ```bash
   docker compose -f docker-compose.dev.yml restart neurfotobot
   ```

4. **–ó–∞–ø—É—Å—Ç–∏ nginx** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω):
   ```bash
   brew services start nginx
   ```
   Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 8080, –ø—Ä–æ–∫—Å–∏—Ä—É—è –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Docker-—Å–µ—Ä–≤–∏—Å—ã –ø–æ –ø—É—Ç—è–º.

5. **–¢–µ—Å—Ç–∏—Ä—É–π —á–µ—Ä–µ–∑ ngrok** (–Ω–∞ Mac, –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ):
   ```bash
   ngrok http 8080
   ```
   –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—Ä—Ç 8080 (nginx), –∞ –Ω–µ –ø–æ—Ä—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî —Ç–∞–∫ –æ–¥–∏–Ω ngrok URL –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤.

### –î–µ–ø–ª–æ–π:

1. **–ö–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```bash
   git add .
   git commit -m "feat: ..."
   git push origin dev
   ```

2. **–°–º–µ—Ä–¥–∂–∏—Ç—å –≤ main:**
   ```bash
   git checkout main
   git merge dev
   git push origin main
   ```

3. **CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä** (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Neurfotobot)
docker compose -f docker-compose.dev.yml up neurfotobot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.dev.yml up

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ
docker compose -f docker-compose.dev.yml up -d
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.dev.yml down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker compose -f docker-compose.dev.yml down -v
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose -f docker-compose.dev.yml logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker compose -f docker-compose.dev.yml logs -f neurfotobot
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å
docker compose -f docker-compose.dev.yml restart neurfotobot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
docker compose -f docker-compose.dev.yml restart
```

### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker compose -f docker-compose.dev.yml exec neurfotobot bash
```

---

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞?**  
A: –ù–µ—Ç! –ö–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volume, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏?**  
A: –î–∞! IDE —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–¥–æ–º –Ω–∞ Mac, Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤ Linux - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

**Q: –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ë–î –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã?**  
A: –ù–∞ Mac (–≤ –ø–∞–ø–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞), –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ volumes.

**Q: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏?**  
A: –ò–∑–º–µ–Ω–∏ `Package.swift`, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞–∑:
```bash
docker compose -f docker-compose.dev.yml build --no-cache neurfotobot
```

**Q: –ü–æ—á–µ–º—É –∫–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ?**  
A: –£–±–µ–¥–∏—Å—å, —á—Ç–æ volumes –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `docker-compose.dev.yml`. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∞ –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è.

**Q: –ù—É–∂–µ–Ω –ª–∏ nginx –¥–ª—è Docker –≤–∞—Ä–∏–∞–Ω—Ç–∞?**  
A: –î–∞, nginx –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 8080, –ø—Ä–æ–∫—Å–∏—Ä—É—è –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Docker-—Å–µ—Ä–≤–∏—Å—ã –ø–æ –ø—É—Ç—è–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω ngrok URL –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤. –ö–æ–Ω—Ñ–∏–≥: `/opt/homebrew/etc/nginx/nginx.conf` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω).

**Q: –ù–∞ –∫–∞–∫–æ–π –ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å ngrok?**  
A: –í—Å–µ–≥–¥–∞ –Ω–∞ –ø–æ—Ä—Ç 8080 (nginx), –∞ –Ω–µ –Ω–∞ –ø–æ—Ä—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. Nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ –ø—É—Ç—è–º.

**Q: –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Docker daemon?**  
A: –û—Ç–∫—Ä–æ–π Docker Desktop –∏–∑ Applications. Docker daemon –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É "Cannot connect to the Docker daemon", –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–¥–æ–∂–¥–∏ 10-20 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞.

**Q: Docker Desktop –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ?**  
A: –£–±–µ–¥–∏—Å—å —á—Ç–æ —É Docker Desktop –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø–∞–º—è—Ç—å, CPU) –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. –ù–∞ Mac —Å M1/M2 –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∑–∞–Ω–∏–º–∞—é—â–∏—Ö –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## üèóÔ∏è –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∞–π–ª—ã

### Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** `docker compose -f docker-compose.dev.yml up`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volumes (–Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `swift run` (–Ω–µ production build)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Dockerfile.dev` (–Ω–µ `Dockerfile.prod`)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `config/.env`

### Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** `swift:6.0-noble` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ production build)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Build argument –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
- Install –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `/app`
- –ö–æ–ø–∏—Ä—É–µ–º `Package.swift` –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ `Package.swift` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è)
- –ö–æ–¥ –±—É–¥–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ volume, –ø–æ—ç—Ç–æ–º—É –Ω–µ –∫–æ–ø–∏—Ä—É–µ–º –µ–≥–æ –∑–¥–µ—Å—å
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–µ–º `swift run` (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ docker-compose)

---

## üîÑ Workflow —Å Git

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ –≤–µ—Ç–∫–µ dev

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ dev
git checkout dev

# –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π –≤ Docker
docker compose -f docker-compose.dev.yml up neurfotobot

# –ö–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "feat: ..."
git push origin dev
```

### –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD

1. –°–º–µ—Ä–¥–∂–∏—Ç—å `dev` –≤ `main`
2. CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   git pull origin main
   docker compose -f docker-compose.prod.yml up -d --build
   ```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
   ```bash
   docker compose -f docker-compose.dev.yml logs neurfotobot
   ```

2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `.env` —Ñ–∞–π–ª –∑–∞–ø–æ–ª–Ω–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω:
   ```bash
   docker ps
   ```

### –ö–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ volumes –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `docker-compose.dev.yml`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
   ```bash
   docker compose -f docker-compose.dev.yml restart neurfotobot
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ –æ–±—Ä–∞–∑:
   ```bash
   docker compose -f docker-compose.dev.yml build --no-cache neurfotobot
   ```

2. –ü—Ä–æ–≤–µ—Ä—å `Package.swift` –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏

–ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, –∏–∑–º–µ–Ω–∏ –µ–≥–æ –≤ `docker-compose.dev.yml`:
```yaml
ports:
  - "8082:8082"  # –ò–∑–º–µ–Ω–∏ –≤–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç (–ª–µ–≤–∞—è —á–∞—Å—Ç—å)
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **Production –¥–µ–ø–ª–æ–π**: `docs/DEPLOY.md` ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `docs/ARCHITECTURE.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: `docs/QUICK_START.md` ‚Äî –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## ‚úÖ –ò—Ç–æ–≥

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker:**
- ‚úÖ –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –Ω–∞ Mac –≤ IDE (—É–¥–æ–±–Ω–æ)
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Linux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ ‚Üí –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–µ—Ç
- ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ ngrok

**Workflow:**
1. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–¥ –Ω–∞ Mac
2. –ó–∞–ø—É—Å–∫–∞–π –≤ Docker
3. –¢–µ—Å—Ç–∏—Ä—É–π —á–µ—Ä–µ–∑ ngrok
4. –ö–æ–º–º–∏—Ç—å –≤ `dev`
5. –°–º–µ—Ä–¥–∂–∏—Ç—å –≤ `main`
6. CI/CD –∑–∞–¥–µ–ø–ª–æ–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º! üéâ

