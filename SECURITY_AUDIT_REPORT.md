# üîí –û—Ç—á–µ—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ - 24 –¥–µ–∫–∞–±—Ä—è 2025

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò

### 1. **SSH: –†–∞–∑—Ä–µ—à–µ–Ω –≤—Ö–æ–¥ root —Å –ø–∞—Ä–æ–ª–µ–º** üî¥ –ö–†–ò–¢–ò–ß–ù–û
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** `PermitRootLogin yes` –∏ `PasswordAuthentication yes`
- **–†–∏—Å–∫:** –ë—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∏ –Ω–∞ root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞—Ä–æ–ª–µ–º
- **–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:** –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ —Å —Ä–∞–∑–Ω—ã—Ö IP
  - IP: `14.225.2.124` (–í—å–µ—Ç–Ω–∞–º)
  - IP: `202.249.25.132` (–Ø–ø–æ–Ω–∏—è)
  - –ü–æ–ø—ã—Ç–∫–∏ —Å –ª–æ–≥–∏–Ω–∞–º–∏: `user`, `test`, `ubuntu`, `tempusr`, `huawei`, `controll`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
  - –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é –¥–ª—è root: `PermitRootLogin prohibit-password`
  - –û—Ç–∫–ª—é—á–∏—Ç—å –ø–∞—Ä–æ–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é: `PasswordAuthentication no`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ SSH –∫–ª—é—á–∏

### 2. **–û—Ç–∫—Ä—ã—Ç—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ—Ä—Ç—ã** üü° –í–´–°–û–ö–ò–ô –†–ò–°–ö
- **–ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–≤–æ–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º:**
  - `21/tcp` - FTP (proftpd)
  - `25/tcp` - SMTP (exim4)
  - `587/tcp` - SMTP submission (exim4)
  - `465/tcp` - SMTPS (exim4)
  - `110/tcp` - POP3 (dovecot)
  - `143/tcp` - IMAP (dovecot)
  - `993/tcp` - IMAPS (dovecot)
  - `995/tcp` - POP3S (dovecot)
  - `3306/tcp` - MySQL (—Ç–æ–ª—å–∫–æ localhost, –û–ö)
  - `8080/tcp` - Apache (—Ç–æ–ª—å–∫–æ localhost, –û–ö)
- **–†–∏—Å–∫:** –ö–∞–∂–¥—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∞—Ç–∞–∫
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–∫—Ä—ã—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ UFW:
  ```bash
  sudo ufw deny 21/tcp
  sudo ufw deny 25/tcp
  sudo ufw deny 587/tcp
  sudo ufw deny 465/tcp
  sudo ufw deny 110/tcp
  sudo ufw deny 143/tcp
  sudo ufw deny 993/tcp
  sudo ufw deny 995/tcp
  ```

### 3. **fail2ban –∞–∫—Ç–∏–≤–µ–Ω, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ** üü° –°–†–ï–î–ù–ò–ô –†–ò–°–ö
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** fail2ban —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è `exim-isp` –∏ `sshd`
- **–†–∏—Å–∫:** –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∞—Ç–∞–∫–∏
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ fail2ban –¥–ª—è SSH, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ

## üü¢ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ú–û–ú–ï–ù–¢–´

### 1. **Firewall (UFW) –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã: 22, 80, 443
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é deny –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –•–æ—Ä–æ—à–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### 2. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å `telegrambot_telegrambot_network`
- –°–µ—Ä–≤–∏—Å—ã –±–æ—Ç–æ–≤ –Ω–µ —ç–∫—Å–ø–æ–Ω–∏—Ä—É—é—Ç –ø–æ—Ä—Ç—ã –Ω–∞—Ä—É–∂—É (–∫—Ä–æ–º–µ Traefik)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 3. **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∑–∞—â–∏—â–µ–Ω—ã**
- `/root/.ssh/` - –ø—Ä–∞–≤–∞ 700 (‚úÖ)
- `config/.env` - –ø—Ä–∞–≤–∞ 600 (‚úÖ)
- `github_vps.pub` - –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á, –º–æ–∂–µ—Ç –±—ã—Ç—å 644 (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### 4. **Traefik –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ HTTPS**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS —á–µ—Ä–µ–∑ Let's Encrypt
- –†–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ù–û - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

1. **–û—Ç–∫–ª—é—á–∏—Ç—å –ø–∞—Ä–æ–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é SSH:**
   ```bash
   sudo nano /etc/ssh/sshd_config
   # –ò–∑–º–µ–Ω–∏—Ç—å:
   PermitRootLogin prohibit-password
   PasswordAuthentication no
   PubkeyAuthentication yes
   
   sudo systemctl restart sshd
   ```

2. **–ó–∞–∫—Ä—ã—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ—Ä—Ç—ã:**
   ```bash
   sudo ufw deny 21/tcp
   sudo ufw deny 25/tcp
   sudo ufw deny 587/tcp
   sudo ufw deny 465/tcp
   sudo ufw deny 110/tcp
   sudo ufw deny 143/tcp
   sudo ufw deny 993/tcp
   sudo ufw deny 995/tcp
   sudo ufw reload
   ```

3. **–û—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   sudo systemctl disable proftpd
   sudo systemctl stop proftpd
   sudo systemctl disable exim4
   sudo systemctl stop exim4
   sudo systemctl disable dovecot
   sudo systemctl stop dovecot
   ```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–ê–ñ–ù–û - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –Ω–∞ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - –ú–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫
   - –ù–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å logwatch –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
   sudo apt install logwatch
   ```

6. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–£–õ–£–ß–®–ï–ù–ò–Ø):

7. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**
8. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Grafana)**
9. **–†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

**–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: 6/10**

- ‚úÖ Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ Docker –∏–∑–æ–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚ùå SSH —É—è–∑–≤–∏–º –∫ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∞–º
- ‚ùå –û—Ç–∫—Ä—ã—Ç—ã –ª–∏—à–Ω–∏–µ –ø–æ—Ä—Ç—ã
- ‚ö†Ô∏è fail2ban —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º: 8.5/10**

## üîç –ê–ö–¢–ò–í–ù–´–ï –ê–¢–ê–ö–ò

–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞:
- –í—å–µ—Ç–Ω–∞–º (14.225.2.124): –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
- –Ø–ø–æ–Ω–∏—è (202.249.25.132): –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ª–æ–≥–∏–Ω—ã: `user`, `test`, `ubuntu`, `tempusr`, `huawei`, `controll`

**fail2ban –¥–æ–ª–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ IP, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç—É.**

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 24 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –î–∏–º–æ—á–∫–∞  
**–°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü

