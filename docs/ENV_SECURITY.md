# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ .env —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–≠—Ç–æ –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ —Ñ–∞–π–ª–∞ `.env` —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –Ω–∞ production —Å–µ—Ä–≤–µ—Ä.

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

1. **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å `.env` –≤ Git**
2. **–ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π `.env` –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –ø–æ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º**
3. **–ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π `.env` –≤ –æ–±—â–∏—Ö –ø–∞–ø–∫–∞—Ö –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö**
4. **–í–°–ï–ì–î–ê —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** (`chmod 600`)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± (SCP)

–° MacBook:

```bash
# –ü–µ—Ä–µ–¥–∞–π —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp config/.env user@your-server-ip:/path/to/Telegrambot/config/.env

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∞–≤–∞
ssh user@your-server-ip
chmod 600 /path/to/Telegrambot/config/.env
```

## üîê –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ –Ω–∞ MacBook

```bash
cd /path/to/Telegrambot
tar -czf - config/.env | openssl enc -aes-256-cbc -salt -out /tmp/env.enc
# –í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å (–∑–∞–ø–æ–º–Ω–∏ –µ–≥–æ!)
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–¥–∞–π –∞—Ä—Ö–∏–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
scp /tmp/env.enc user@your-server-ip:/tmp/
```

### –®–∞–≥ 3: –†–∞—Å—à–∏—Ñ—Ä—É–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh user@your-server-ip
cd /path/to/Telegrambot
mkdir -p config
openssl enc -aes-256-cbc -d -in /tmp/env.enc | tar -xzf - -C .
chmod 600 config/.env
rm /tmp/env.enc  # –£–¥–∞–ª–∏ –∞—Ä—Ö–∏–≤
```

## ‚úèÔ∏è –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ SSH)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh user@your-server-ip
cd /path/to/Telegrambot
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π —Ñ–∞–π–ª

```bash
nano config/.env
```

### –®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

–°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env` —Ñ–∞–π–ª–∞ —Å MacBook –∏ –≤—Å—Ç–∞–≤—å –≤ nano:
- –í nano: `Ctrl+Shift+V` (–∏–ª–∏ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí –í—Å—Ç–∞–≤–∏—Ç—å)
- –°–æ—Ö—Ä–∞–Ω–∏: `Ctrl+O`, `Enter`
- –í—ã–π–¥–∏: `Ctrl+X`

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–∞–≤–∞

```bash
chmod 600 config/.env
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å -rw-------)
ls -l config/.env

# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Git
git check-ignore config/.env
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: config/.env

# –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –≤ Git –∏—Å—Ç–æ—Ä–∏–∏
git ls-files config/.env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç)
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª:

1. –ò—Å–ø–æ–ª—å–∑—É–π –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã—à–µ
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker compose -f docker-compose.prod.yml restart
```

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

### –ß–µ—Ä–µ–∑ password manager

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å password manager (1Password, LastPass, Bitwarden):

1. –°–æ—Ö—Ä–∞–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env` –∫–∞–∫ secure note
2. –°–∫–æ–ø–∏—Ä—É–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ SSH
3. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª –∏ –≤—Å—Ç–∞–≤—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

### –ß–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–Ω–∞–ª

–ï—Å–ª–∏ –µ—Å—Ç—å VPN –∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–Ω–∞–ª:

1. –°–æ–∑–¥–∞–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
2. –ó–∞–≥—Ä—É–∑–∏ —á–µ—Ä–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–Ω–∞–ª
3. –†–∞—Å—à–∏—Ñ—Ä—É–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –£–¥–∞–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–ø–æ—Å–æ–±)

–ú–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ MacBook –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–¥–∞—á–∏:

```bash
#!/bin/bash
# deploy-env.sh

SERVER="user@your-server-ip"
REMOTE_PATH="/path/to/Telegrambot"

# –°–æ–∑–¥–∞–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤
tar -czf - config/.env | openssl enc -aes-256-cbc -salt -out /tmp/env.enc

# –ü–µ—Ä–µ–¥–∞–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp /tmp/env.enc $SERVER:/tmp/

# –†–∞—Å—à–∏—Ñ—Ä—É–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh $SERVER "cd $REMOTE_PATH && \
  mkdir -p config && \
  openssl enc -aes-256-cbc -d -in /tmp/env.enc | tar -xzf - -C . && \
  chmod 600 config/.env && \
  rm /tmp/env.enc"

# –£–¥–∞–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏–≤
rm /tmp/env.enc

echo "‚úÖ .env —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
```

–°–æ—Ö—Ä–∞–Ω–∏ –∫–∞–∫ `deploy-env.sh`, —Å–¥–µ–ª–∞–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (`chmod +x deploy-env.sh`) –∏ –∏—Å–ø–æ–ª—å–∑—É–π:

```bash
./deploy-env.sh
```

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è ‚Äî –≤–≤–æ–¥–∏ —Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
