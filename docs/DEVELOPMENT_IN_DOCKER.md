# üê≥ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä.

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ macOS ‚Üí –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç macOS-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—É—Ç–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –î–µ–ø–ª–æ–π –Ω–∞ Linux ‚Üí –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É
- SQLite –±–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ Mac ‚Üí —Ñ–æ—Ä–º–∞—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (Linux –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
- –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –Ω–∞ Mac –≤ IDE (—É–¥–æ–±–Ω–æ)
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Linux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- –û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ ‚Üí –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç

## üèóÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Mac (—Ç–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  IDE                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –∫–æ–¥ –∑–¥–µ—Å—å)         ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ           ‚Üì (volumes)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Linux)         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Swift –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–¥–µ—Å—å ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (swift run)                 ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
1. **–ö–æ–¥ –Ω–∞ Mac** ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å –≤ IDE –∫–∞–∫ –æ–±—ã—á–Ω–æ
2. **Volumes** ‚Üí Docker –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –ø–∞–ø–∫–∏ —Å –∫–æ–¥–æ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
3. **–ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ** ‚Üí `swift run` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ Linux –æ–∫—Ä—É–∂–µ–Ω–∏–∏
4. **–û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ** ‚Üí –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –ª–æ–∫–∞–ª—å–Ω–æ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Telegrambot/
‚îú‚îÄ‚îÄ docker-compose.dev.yml    # ‚Üê –ù–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ docker-compose.prod.yml   # ‚Üê –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (—É–∂–µ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ Dockerfile.dev            # ‚Üê –ù–æ–≤—ã–π Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ ...
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `docker-compose.dev.yml`

–°–º. —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è" –Ω–∏–∂–µ.

### 2. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Neurfotobot)
docker compose -f docker-compose.dev.yml up neurfotobot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.dev.yml up

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ
docker compose -f docker-compose.dev.yml up -d
```

### 3. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–¥ –≤ IDE

- –û—Ç–∫—Ä—ã–≤–∞–π —Ñ–∞–π–ª—ã –∫–∞–∫ –æ–±—ã—á–Ω–æ
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–¥
- –°–æ—Ö—Ä–∞–Ω—è–π –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker compose -f docker-compose.dev.yml stop neurfotobot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
docker compose -f docker-compose.dev.yml up neurfotobot
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π hot-reload (—Å–º. —Ä–∞–∑–¥–µ–ª "Hot Reload" –Ω–∏–∂–µ).

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### docker-compose.dev.yml

```yaml
version: '3.8'

# Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: docker compose -f docker-compose.dev.yml up

services:
  # NowControllerBot
  nowcontrollerbot:
    build:
      context: .
      dockerfile: Dockerfile.dev
      args:
        PRODUCT: NowControllerBot
    container_name: telegrambot_dev_nowcontrollerbot
    restart: unless-stopped
    env_file:
      - config/.env
    environment:
      - LOG_LEVEL=debug
    volumes:
      # –ú–æ–Ω—Ç–∏—Ä—É–µ–º –∫–æ–¥ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
      - .:/app
      # –ú–æ–Ω—Ç–∏—Ä—É–µ–º config –æ—Ç–¥–µ–ª—å–Ω–æ
      - ./config:/app/config
    working_dir: /app
    command: swift run NowControllerBot serve --hostname 0.0.0.0 --port 8084
    ports:
      - "8084:8084"
    networks:
      - telegrambot_dev_network

  # Neurfotobot
  neurfotobot:
    build:
      context: .
      dockerfile: Dockerfile.dev
      args:
        PRODUCT: Neurfotobot
    container_name: telegrambot_dev_neurfotobot
    restart: unless-stopped
    env_file:
      - config/.env
    environment:
      - LOG_LEVEL=debug
    volumes:
      - .:/app
      - ./config:/app/config
      - ./Neurfotobot:/app/Neurfotobot
    working_dir: /app
    command: swift run Neurfotobot serve --hostname 0.0.0.0 --port 8082
    ports:
      - "8082:8082"
    networks:
      - telegrambot_dev_network
    depends_on:
      - nowcontrollerbot

  # Roundsvideobot
  roundsvideobot:
    build:
      context: .
      dockerfile: Dockerfile.dev
      args:
        PRODUCT: VideoServiceRunner
    container_name: telegrambot_dev_roundsvideobot
    restart: unless-stopped
    env_file:
      - config/.env
    environment:
      - LOG_LEVEL=debug
    volumes:
      - .:/app
      - ./config:/app/config
      - ./Roundsvideobot/Resources/temporaryvideoFiles:/app/Roundsvideobot/Resources/temporaryvideoFiles
    working_dir: /app
    command: swift run VideoServiceRunner serve --hostname 0.0.0.0 --port 8081
    ports:
      - "8081:8081"
    networks:
      - telegrambot_dev_network
    depends_on:
      - nowcontrollerbot

  # –î–æ–±–∞–≤—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏...

networks:
  telegrambot_dev_network:
    driver: bridge
```

### Dockerfile.dev

```dockerfile
# Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç swift:6.0-noble –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ production build)

FROM swift:6.0-noble

# Build argument –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
ARG PRODUCT=App

# Install –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN export DEBIAN_FRONTEND=noninteractive DEBCONF_NONINTERACTIVE_SEEN=true \
    && apt-get -q update \
    && apt-get -q dist-upgrade -y \
    && apt-get install -y \
      libjemalloc-dev \
      curl \
      libsqlite3-dev \
      ffmpeg \
      python3 \
      python3-pip \
      wget \
    && pip3 install --no-cache-dir --break-system-packages yt-dlp \
    && wget -qO /usr/local/bin/yt-dlp https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp \
    && chmod a+rx /usr/local/bin/yt-dlp \
    && rm -r /var/lib/apt/lists/*

# –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º Package.swift –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY Package.swift Package.resolved* ./

# –†–∞–∑—Ä–µ—à–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ Package.swift –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è)
RUN swift package resolve

# –ö–æ–¥ –±—É–¥–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ volume, –ø–æ—ç—Ç–æ–º—É –Ω–µ –∫–æ–ø–∏—Ä—É–µ–º –µ–≥–æ –∑–¥–µ—Å—å
# –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –Ω–∞ Mac –∏ –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–µ–º swift run (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ docker-compose)
CMD ["swift", "run", "NowControllerBot"]
```

## üîÑ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–ø—Ä–æ—Å—Ç–æ–π)

1. **–†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–¥ –≤ IDE**
2. **–°–æ—Ö—Ä–∞–Ω—è–π —Ñ–∞–π–ª—ã**
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```bash
   docker compose -f docker-compose.dev.yml restart neurfotobot
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Hot Reload (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

–ò—Å–ø–æ–ª—å–∑—É–π `swift run` —Å —Ñ–ª–∞–≥–æ–º `--watch` (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ç–∏–ø–∞ `watchexec`:

```yaml
# –í docker-compose.dev.yml
command: watchexec -w Sources -- swift run Neurfotobot serve --hostname 0.0.0.0 --port 8082
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π Vapor's built-in watch mode (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω).

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   docker compose -f docker-compose.dev.yml up
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π ngrok** (–Ω–∞ Mac, –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ):
   ```bash
   ngrok http 8080
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π webhooks:**
   ```bash
   set -a; source config/.env; set +a
   ./config/set-webhooks.sh
   ```

4. **–¢–µ—Å—Ç–∏—Ä—É–π –±–æ—Ç–∞** —á–µ—Ä–µ–∑ Telegram

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker compose -f docker-compose.dev.yml logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker compose -f docker-compose.dev.yml logs -f neurfotobot
```

## üìÇ –†–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

### Roundsvideobot
- –ü—É—Ç—å: `Roundsvideobot/Resources/temporaryvideoFiles`
- Volume: `./Roundsvideobot/Resources/temporaryvideoFiles:/app/Roundsvideobot/Resources/temporaryvideoFiles`
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ Mac –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### Neurfotobot
- –ü—É—Ç—å: `Neurfotobot/tmp` (—á–µ—Ä–µ–∑ `NEURFOTOBOT_TEMP_DIR`)
- Volume: `./Neurfotobot:/app/Neurfotobot`
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ Mac

### PereskazNowBot
- –ü—É—Ç—å: `/tmp` (—Å–∏—Å—Ç–µ–º–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- –§–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç volume (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)

## üíæ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### SQLite –±–∞–∑—ã

–í—Å–µ SQLite –±–∞–∑—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ volumes:

```yaml
volumes:
  - ./config:/app/config  # monetization.sqlite
  - ./Neurfotobot:/app/Neurfotobot  # db.sqlite
  - ./contentfabrikabot:/app/contentfabrikabot  # db.sqlite
```

**–í–∞–∂–Ω–æ:**
- –ë–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ Mac (–≤ –ø–∞–ø–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞)
- –î–æ—Å—Ç—É–ø–Ω—ã –∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∏ –Ω–∞ Mac
- –§–æ—Ä–º–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π (Linux —Ñ–æ—Ä–º–∞—Ç, —Ç–∞–∫ –∫–∞–∫ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

## üîÄ –†–∞–±–æ—Ç–∞ —Å –≤–µ—Ç–∫–∞–º–∏

### –í–µ—Ç–∫–∞ dev (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ dev
git checkout dev

# –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π –≤ Docker
docker compose -f docker-compose.dev.yml up

# –ö–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "feat: ..."
git push origin dev
```

### –í–µ—Ç–∫–∞ prod (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ prod
git checkout prod

# –°–º–µ—Ä–¥–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ dev
git merge dev

# –ó–∞–¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git push origin prod

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git pull origin prod
docker compose -f docker-compose.prod.yml up -d --build
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ—Ü–µ—Å—Å

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∞–π –≤ dev –≤–µ—Ç–∫–µ** (–ª–æ–∫–∞–ª—å–Ω–æ –≤ Docker)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –ª–æ–∫–∞–ª—å–Ω–æ**
3. **–°–º–µ—Ä–¥–∂–∏ –≤ prod:**
   ```bash
   git checkout prod
   git merge dev
   git push origin prod
   ```
4. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   git pull origin prod
   docker compose -f docker-compose.prod.yml up -d --build
   ```

### CI/CD (–±—É–¥—É—â–µ–µ)

–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥ –ø—Ä–∏ –ø—É—à–µ –≤ prod
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## ‚ùì FAQ

### –ü–æ—á–µ–º—É –∫–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ?

–£–±–µ–¥–∏—Å—å, —á—Ç–æ volume –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω:
```yaml
volumes:
  - .:/app  # –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –≤—Å—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
```

–ò –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker compose -f docker-compose.dev.yml restart neurfotobot
```

### –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É?

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
   ```bash
   docker compose -f docker-compose.dev.yml logs neurfotobot
   ```

2. **–ó–∞–π–¥–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```bash
   docker compose -f docker-compose.dev.yml exec neurfotobot bash
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–æ–¥ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω:**
   ```bash
   ls -la /app/Neurfotobot/Sources
   ```

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏?

–î–∞! IDE —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–¥–æ–º –Ω–∞ Mac, –∞ Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥ –≤ Linux. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

### –ù—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞?

–ù–µ—Ç! –ö–æ–¥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ volume, –ø–æ—ç—Ç–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è `Package.swift` –∏–ª–∏ `Dockerfile.dev`.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Docker Compose –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.docker.com/compose/)
- [Vapor –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.vapor.codes/)
- [Swift Package Manager](https://swift.org/package-manager/)

