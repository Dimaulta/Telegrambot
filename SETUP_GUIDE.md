# üòç –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –æ—Ç–ª–∞–¥–∫–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–æ–≤ –Ω–∞ Vapor

–ü–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç "Roundsvideobot" —ç—Ç–æ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç –ø–æ –æ–±—Ä–µ–∑–∞–Ω–∏—é –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –≤ –Ω–µ–≥–æ –≤–∏–¥–µ–æ –¥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º –∫—Ä—É–∂–∫–∞.

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

–£ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∞–¥—Ä–µ—Å –¥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: `/Users/a1111/Desktop/projects/Telegrambot`

–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —ç—Ç–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

## üöÄ –®–ê–ì 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop

**‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ü–ï–†–í–´–ú, –¥–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤!**

1. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Docker Desktop** –Ω–∞ Mac
2. –î–æ–∂–¥–∏—Å—å, –ø–æ–∫–∞ Docker Desktop –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è (–∏–∫–æ–Ω–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å—Å—è)
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç: –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏:
   ```bash
   docker ps
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–¥–∞–∂–µ –ø—É—Å—Ç–æ–π) ‚Äî –≤—Å—ë –æ–∫! ‚úÖ

---

## üåê –®–ê–ì 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å NGINX

1. –û—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –æ—Ç–∫—Ä—ã—Ç)
2. –ó–∞–ø—É—Å—Ç–∏ nginx –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å:
   ```bash
   brew services start nginx
   ```
   **üí° –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ:** `Service 'nginx' already started` ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! nginx —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–π.
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   curl -s http://127.0.0.1:8080/ | head -n 3
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å HTML (–Ω–∞–ø—Ä–∏–º–µ—Ä, `<!DOCTYPE html>`) ‚Äî –≤—Å—ë –æ–∫! ‚úÖ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å (daemon) –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, **–ù–ï –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**. –¢–µ—Ä–º–∏–Ω–∞–ª –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî nginx –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

---

## üê≥ –®–ê–ì 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker-—Å–µ—Ä–≤–∏—Å—ã (Playwright) (–í–∫–ª–∞–¥–∫–∞ 2)

**–ü—Ä–æ–≤–µ—Ä—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**

1. **–û—Ç–∫—Ä–æ–π Docker Desktop** –∏ –ø—Ä–æ–≤–µ—Ä—å, –µ—Å—Ç—å –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `playwright-service` –≤ —Å–ø–∏—Å–∫–µ
2. **–ò–ª–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏:**
   ```bash
   docker ps | grep playwright-service
   ```

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –£–ñ–ï –∑–∞–ø—É—â–µ–Ω (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è Docker Desktop):**

- –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ —à–∞–≥—É 4 (–∑–∞–ø—É—Å–∫ ngrok)

**–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ù–ï –∑–∞–ø—É—â–µ–Ω (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):**

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
2. **–ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot
   ```
3. **–ó–∞–ø—É—Å—Ç–∏ Playwright-—Å–µ—Ä–≤–∏—Å:**
   ```bash
   docker compose up playwright-service
   ```
   
   **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
   - Docker —Å–∫–∞—á–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –æ–±—Ä–∞–∑—ã (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–∫–∞—á–∞–Ω—ã) ‚Äî —ç—Ç–æ –∑–∞–π–º—ë—Ç ~10 –º–∏–Ω—É—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
   - Playwright-—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000
   
4. **–î–æ–∂–¥–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:** `‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω` ‚úÖ

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å `restart: unless-stopped` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ Docker Desktop, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –∑–∞–ø—É—â–µ–Ω —Ä–∞–Ω–µ–µ.

---

## üåê –®–ê–ì 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok —Å VPN (–í–∫–ª–∞–¥–∫–∞ 3)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ URL –∏—Å–ø–æ–ª—å–∑—É–π ngrok —Å VPN! URL –Ω–µ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –Ω–µ–¥–µ–ª—è–º–∏.**

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: VPN –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –í–ö–õ–Æ–ß–ï–ù –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º ngrok!**

1. **–í–∫–ª—é—á–∏ VPN** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –≤–∫–ª—é—á–µ–Ω)
2. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ VPN —Ä–∞–±–æ—Ç–∞–µ—Ç** (–ø—Ä–æ–≤–µ—Ä—å IP):
   ```bash
   curl -s https://api.ipify.org
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å IP –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω—ã (–Ω–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π) ‚Äî VPN —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —Ä–æ—Å—Å–∏–π—Å–∫–∏–π IP (–Ω–∞–ø—Ä–∏–º–µ—Ä, `90.154.72.243`) ‚Äî VPN –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–∫–ª—é—á–∏ VPN –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–Ω–æ–≤–∞!
3. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
4. **–ó–∞–ø—É—Å—Ç–∏ ngrok:**
   ```bash
   ngrok http 8080 --log=stdout
   ```
   
   **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
   - ngrok —Å–æ–∑–¥–∞—Å—Ç —Ç—É–Ω–Ω–µ–ª—å –Ω–∞ –ø–æ—Ä—Ç 8080 (–≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç nginx)
   - –í –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è URL –≤–∏–¥–∞: `https://xxxxx-xxxxx-xxxxx.ngrok-free.app`
   - –≠—Ç–æ—Ç URL –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –ø–æ–∫–∞ ngrok –∑–∞–ø—É—â–µ–Ω
   
   **–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É:** `ERR_NGROK_9040` –∏–ª–∏ `authentication failed: We do not allow agents to connect to ngrok from your IP address` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç VPN –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏–ª—Å—è. –í–∫–ª—é—á–∏ VPN –∏ –∑–∞–ø—É—Å—Ç–∏ ngrok —Å–Ω–æ–≤–∞.
   
5. **–°–∫–æ–ø–∏—Ä—É–π URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://b1af2365e793.ngrok-free.app`)
6. **–≠—Ç–∞ –≤–∫–ª–∞–¥–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π** ‚Äî ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ

**üí° –°–æ–≤–µ—Ç:** –ï—Å–ª–∏ VPN –æ—Ç–∫–ª—é—á–∏—Ç—Å—è, ngrok –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å. –í–∫–ª—é—á–∏ VPN —Å–Ω–æ–≤–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ ngrok ‚Äî URL –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–µ–º –∂–µ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω) –∏–ª–∏ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è (–µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞).

---

## üìù –®–ê–ì 5: –û–±–Ω–æ–≤–∏—Ç—å BASE_URL –≤ –∫–æ–Ω—Ñ–∏–≥–µ

1. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `config/.env`** –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. **–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É:**
   ```
   BASE_URL=https://old-url.loca.lt
   ```
3. **–ó–∞–º–µ–Ω–∏ –Ω–∞ –Ω–æ–≤—ã–π URL** –∏–∑ —à–∞–≥–∞ 3:
   ```
   BASE_URL=https://olive-pans-kneel.loca.lt
   ```
   (–∏—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–π URL –∏–∑ –ª–æ–≥–æ–≤ localtunnel!)

4. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª** (`Cmd + S`)

---

## üîë –®–ê–ì 6: –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook'–∏ (–í–∫–ª–∞–¥–∫–∞ 4)

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
2. **–ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot
   ```
3. **–ó–∞–≥—Ä—É–∑–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```bash
   set -a; source config/.env; set +a
   env | grep -E 'SORANOWBOT_TOKEN|VIDEO_BOT_TOKEN|GSFORTEXTBOT_TOKEN|NEURFOTOBOT_TOKEN'
   ```
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –≤—Å–µ 4 —Ç–æ–∫–µ–Ω–∞ ‚Äî –≤—Å—ë –æ–∫! ‚úÖ
4. **–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–æ):
   ```bash
   chmod +x config/set-webhooks-manual.sh
   ```
5. **–ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö webhook'–æ–≤:**
   ```bash
   ./config/set-webhooks-manual.sh
   ```
   
   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ó–∞–≥—Ä—É–∑–∏—Ç `BASE_URL` –∏–∑ `config/.env`
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç webhook'–∏ –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤:
     - SoranowBot ‚Üí `/sora/webhook`
     - Video Bot ‚Üí `/rounds/webhook`
     - GS For Text Bot ‚Üí `/gs/text/webhook`
     - Neurfotobot ‚Üí `/neurfoto/webhook`
   
   –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `{"ok":true,"result":true,"description":"Webhook was set"}` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ ‚Äî –≤—Å—ë –æ–∫! ‚úÖ
   
   **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç —Å–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env`, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —à–∞–≥–µ 3 –ø–æ–º–æ–≥–∞–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞.

---

## üé¨ –®–ê–ì 7: –ó–∞–ø—É—Å—Ç–∏—Ç—å Roundsvideobot (–í–∫–ª–∞–¥–∫–∞ 5)

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
2. **–ó–∞–ø—É—Å—Ç–∏ VideoServiceRunner:**
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot && LOG_LEVEL=debug swift run VideoServiceRunner
   ```
3. **–î–æ–∂–¥–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:** `Server started on http://127.0.0.1:8081` ‚úÖ

---

## üé≠ –®–ê–ì 8: –ó–∞–ø—É—Å—Ç–∏—Ç—å SoranowBot (–í–∫–ª–∞–¥–∫–∞ 6)

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
2. **–ó–∞–ø—É—Å—Ç–∏ SoranowBot:**
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot && LOG_LEVEL=debug swift run SoranowBot
   ```
3. **–î–æ–∂–¥–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:** `Server started on http://127.0.0.1:8084` ‚úÖ

---

## ‚úÖ –®–ê–ì 9: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:** –Ω–∞–∂–º–∏ `Cmd + T`
2. **–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ nginx (–ª–æ–∫–∞–ª—å–Ω–æ):**
   ```bash
   curl -i http://127.0.0.1:8080/sora/webhook \
     -H "Content-Type: application/json" \
     -d '{"update_id":1,"message":{"message_id":1,"chat":{"id":123},"text":"https://sora.chatgpt.com/p/TEST"}}'
   ```
   **–û–∂–∏–¥–∞–µ–º:** `HTTP/1.1 200 OK` ‚úÖ

3. **–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ngrok (–∏–∑–≤–Ω–µ):**
   - **–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏ URL –æ—Ç ngrok:**
     - –ü–æ—Å–º–æ—Ç—Ä–∏ –≤ –≤–∫–ª–∞–¥–∫–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω ngrok ‚Äî –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É `Forwarding https://xxxxx-xxxxx-xxxxx.ngrok-free.app`
     - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://127.0.0.1:4040 (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ngrok)
   - **–ó–∞–º–µ–Ω–∏ `–í–ê–®-URL-–û–¢-NGROK` –≤ –∫–æ–º–∞–Ω–¥–µ –Ω–∏–∂–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL:**
   ```bash
   curl -i https://–í–ê–®-URL-–û–¢-NGROK.ngrok-free.app/sora/webhook \
     -H "Content-Type: application/json" \
     -d '{"update_id":1,"message":{"message_id":1,"chat":{"id":123},"text":"https://sora.chatgpt.com/p/TEST"}}'
   ```
   **–û–∂–∏–¥–∞–µ–º:** `HTTP/1.1 200 OK` ‚úÖ

---

## üé® –®–ê–ì 10: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Menu Button –≤ Telegram

1. –û—Ç–∫—Ä–æ–π **@BotFather** –≤ Telegram
2. –í—ã–±–µ—Ä–∏ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@roundvideobot` –∏–ª–∏ `@soranowbot`)
3. –ù–∞–∂–º–∏ **"Bot settings"**
4. –í—ã–±–µ—Ä–∏ **"Menu button"**
5. –ù–∞–∂–º–∏ **"Configure menu button"**
6. –í—Å—Ç–∞–≤—å URL –∏–∑ —Ç—É–Ω–Ω–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://olive-pans-kneel.loca.lt`)
7. –ù–∞–∂–º–∏ **"Send"** ‚úÖ

---

## üìã –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢:

- [ ] Docker Desktop –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Nginx –∑–∞–ø—É—â–µ–Ω (–∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–æ–π –≤–∫–ª–∞–¥–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
- [ ] Docker-—Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã: Playwright (–≤–∫–ª–∞–¥–∫–∞ 2)
- [ ] ngrok –∑–∞–ø—É—â–µ–Ω —Å VPN (–≤–∫–ª–∞–¥–∫–∞ 3)
- [ ] BASE_URL –æ–±–Ω–æ–≤–ª—ë–Ω –≤ `config/.env`
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ webhook'–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–≤–∫–ª–∞–¥–∫–∞ 4)
- [ ] VideoServiceRunner –∑–∞–ø—É—â–µ–Ω (–≤–∫–ª–∞–¥–∫–∞ 5)
- [ ] SoranowBot –∑–∞–ø—É—â–µ–Ω (–≤–∫–ª–∞–¥–∫–∞ 6)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Menu Button –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Telegram

---

## üîÑ –ü–ï–†–ï–ó–ê–ü–£–°–ö –°–ï–†–í–ò–°–û–í:

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–µ—Ä–≤–∏—Å:**

1. **Nginx:** `brew services restart nginx`
2. **Docker-—Å–µ—Ä–≤–∏—Å—ã (Playwright):** 
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot
   docker compose restart playwright-service
   ```
   –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω—É–ª—è:
   ```bash
   docker compose down
   docker compose up playwright-service
   ```

3. **ngrok:** –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–≤–∫–ª–∞–¥–∫–∞ 3):
   ```bash
   ngrok http 8080 --log=stdout
   ```
   **üí° URL –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–µ–º –∂–µ**, –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–ª–∞.

## üîÑ –ï–°–õ–ò NGROK –ü–ï–†–ï–°–¢–ê–õ –†–ê–ë–û–¢–ê–¢–¨:

**–ï—Å–ª–∏ –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å ngrok:**

1. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω** (–≤–∫–ª–∞–¥–∫–∞ 3 –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞)
2. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ VPN –≤–∫–ª—é—á–µ–Ω** (ngrok —Ç—Ä–µ–±—É–µ—Ç VPN –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö IP)
3. **–ï—Å–ª–∏ ngrok —É–ø–∞–ª ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏:**
   ```bash
   ngrok http 8080 --log=stdout
   ```
4. **URL –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–µ–º –∂–µ** (–µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–ª–∞) –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é)
5. **–ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî –æ–±–Ω–æ–≤–∏ BASE_URL –≤ `config/.env`** –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook'–æ–≤:
   ```bash
   cd /Users/a1111/Desktop/projects/Telegrambot
   ./config/set-webhooks-manual.sh
   ```

**üí° –°–æ–≤–µ—Ç:** ngrok —Å VPN —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–µ–¥–µ–ª—è–º–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞. URL –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ ngrok –∑–∞–ø—É—â–µ–Ω.

4. **Vapor-—Å–µ—Ä–≤–∏—Å—ã:** –ü—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏ (`Ctrl + C`) –∏ –∑–∞–ø—É—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —à–∞–≥–æ–≤ 7 –∏ 8.

---

## üêõ –û–¢–õ–ê–î–ö–ê:

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   docker ps
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Docker-—Å–µ—Ä–≤–∏—Å–æ–≤:**
   ```bash
   docker logs playwright-service --tail 50
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   ```bash
   curl http://127.0.0.1:8080/health
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Playwright-—Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç:**
   ```bash
   curl http://127.0.0.1:3000/health
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   ```bash
   curl https://YOUR-NGROK-URL.ngrok-free.app/health
   ```
   (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π URL –∏–∑ ngrok!)

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø:

- **ngrok —Å VPN** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–µ–¥–µ–ª—è–º–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ‚Äî URL –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ ngrok –∑–∞–ø—É—â–µ–Ω
- **Playwright-—Å–µ—Ä–≤–∏—Å** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç persistent –ø—Ä–æ—Ñ–∏–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (–∫—É–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è) ‚Äî —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±—Ö–æ–¥–∏—Ç—å Cloudflare
- **Docker-—Å–µ—Ä–≤–∏—Å—ã** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ (–±–ª–∞–≥–æ–¥–∞—Ä—è `restart: unless-stopped` –≤ `docker-compose.yml`)
- **ngrok —Ç—Ä–µ–±—É–µ—Ç VPN** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö IP –∞–¥—Ä–µ—Å–æ–≤
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî –∫–∞–∂–¥—ã–π –≤ —Å–≤–æ–µ–π –≤–∫–ª–∞–¥–∫–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

---

**–£–¥–∞—á–∏! üöÄ**

