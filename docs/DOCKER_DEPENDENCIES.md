# üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤ –≤ Docker

## ‚úÖ –ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ Dockerfile.prod

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:
- ‚úÖ `ffmpeg` - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
- ‚úÖ `yt-dlp` - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∞—É–¥–∏–æ —Å YouTube
- ‚úÖ `python3`, `python3-pip` - –¥–ª—è yt-dlp
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ `libcurl4` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è curl
- ‚úÖ `wget` - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è yt-dlp –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
- ‚úÖ `libjemalloc2` - –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏
- ‚úÖ `ca-certificates` - –¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ `tzdata` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–æ–Ω–∞–º–∏

## ü§ñ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ –±–æ—Ç–∞–º

### 1. Roundsvideobot (VideoServiceRunner)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `ffmpeg` - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –≤ –≤–∏–¥–µ–æ–∫—Ä—É–∂–∫–∏
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Telegram API

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ ffmpeg (–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫—Ä–æ–ø, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ–∫—Ä—É–∂–∫–æ–≤ –∏–∑ –ª—é–±—ã—Ö –≤–∏–¥–µ–æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - ffmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—É—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 2. PereskazNowBot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `yt-dlp` - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∞—É–¥–∏–æ —Å YouTube
- ‚úÖ `ffmpeg` - –¥–ª—è —Å–∂–∞—Ç–∏—è –±–æ–ª—å—à–∏—Ö –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ (>25MB)
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI API

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ yt-dlp
- –°–∂–∞—Ç–∏–µ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ ffmpeg (–µ—Å–ª–∏ —Ñ–∞–π–ª > 25MB)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenAI Whisper API –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - yt-dlp –∏ ffmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### 3. Neurfotobot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ HTTP API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- Replicate API (—á–µ—Ä–µ–∑ HTTP)
- Yandex Translate API (—á–µ—Ä–µ–∑ HTTP)
- Google Vision API (—á–µ—Ä–µ–∑ HTTP)
- OpenAI API (—á–µ—Ä–µ–∑ HTTP)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - —Ç–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã

### 4. GolosNowBot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ HTTP API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- SaluteSpeech API (—á–µ—Ä–µ–∑ HTTP)
- Telegram API (—á–µ—Ä–µ–∑ HTTP)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - —Ç–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã

### 5. ContentFabrikaBot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ HTTP API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- OpenAI API (—á–µ—Ä–µ–∑ HTTP)
- Telegram API (—á–µ—Ä–µ–∑ HTTP)
- SQLite (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Swift)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - —Ç–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ SQLite

### 6. FileNowBot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ HTTP API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- TikTok API (—á–µ—Ä–µ–∑ HTTP)
- Telegram API (—á–µ—Ä–µ–∑ HTTP)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - —Ç–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã

### 7. NowControllerBot
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ `curl` - –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ HTTP API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- Telegram API (—á–µ—Ä–µ–∑ HTTP)
- SQLite (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Swift)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ - —Ç–æ–ª—å–∫–æ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ SQLite

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### Roundsvideobot - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ ffmpeg

**–ë—ã–ª–æ:**
```swift
process.executableURL = URL(fileURLWithPath: "/opt/homebrew/bin/ffmpeg")
```

**–°—Ç–∞–ª–æ:**
```swift
// –ò—â–µ–º ffmpeg –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
let ffmpegPaths = ["/usr/bin/ffmpeg", "/usr/local/bin/ffmpeg", "/opt/homebrew/bin/ffmpeg", "ffmpeg"]
var ffmpegPath: String?
for path in ffmpegPaths {
    if FileManager.default.fileExists(atPath: path) || path == "ffmpeg" {
        ffmpegPath = path
        break
    }
}
guard let ffmpeg = ffmpegPath else {
    throw Abort(.internalServerError, reason: "ffmpeg not found")
}
process.executableURL = URL(fileURLWithPath: ffmpeg)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–∞ macOS (–ª–æ–∫–∞–ª—å–Ω–æ) –∏ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (Linux)

## üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

| –ë–æ—Ç | ffmpeg | yt-dlp | curl | –î—Ä—É–≥–∏–µ |
|-----|--------|--------|------|--------|
| Roundsvideobot | ‚úÖ | ‚ùå | ‚úÖ | - |
| PereskazNowBot | ‚úÖ | ‚úÖ | ‚úÖ | - |
| Neurfotobot | ‚ùå | ‚ùå | ‚úÖ | HTTP API |
| GolosNowBot | ‚ùå | ‚ùå | ‚úÖ | HTTP API |
| ContentFabrikaBot | ‚ùå | ‚ùå | ‚úÖ | SQLite |
| FileNowBot | ‚ùå | ‚ùå | ‚úÖ | HTTP API |
| NowControllerBot | ‚ùå | ‚ùå | ‚úÖ | SQLite |

## ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –±–æ—Ç–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `Dockerfile.prod`:
- ‚úÖ ffmpeg - –¥–ª—è Roundsvideobot –∏ PereskazNowBot
- ‚úÖ yt-dlp - –¥–ª—è PereskazNowBot
- ‚úÖ curl - –¥–ª—è –≤—Å–µ—Ö –±–æ—Ç–æ–≤ (HTTP –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –í—Å–µ –ø—É—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Docker

–ì–æ—Ç–æ–≤–æ –∫ —Å–±–æ—Ä–∫–µ –∏ –∑–∞–ø—É—Å–∫—É! üöÄ

