# üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤ Docker

## üéØ –¶–µ–ª—å

–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤ Docker, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Linux —Å–µ—Ä–≤–µ—Ä.

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

- ‚úÖ **Prod –≤–µ—Ç–∫–∞**: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS –≤ Docker
- ‚úÖ **Dev –≤–µ—Ç–∫–∞**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Mac ‚Üí –¥–µ–ø–ª–æ–π –Ω–∞ Linux ‚Üí –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏, –ë–î, —Ñ—É–Ω–∫—Ü–∏—è–º–∏

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 —á–∞—Å–∞)

#### 1.1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- [x] `docker-compose.dev.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] `Dockerfile.dev` - Dockerfile –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] `docs/DEVELOPMENT_IN_DOCKER.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 1.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
  ```bash
  mkdir -p Roundsvideobot/Resources/temporaryvideoFiles
  mkdir -p Neurfotobot/tmp
  ```

#### 1.3. –û–±–Ω–æ–≤–∏—Ç—å .gitignore

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ë–î –≤ .gitignore
- [ ] –î–æ–±–∞–≤–∏—Ç—å `.build/` –∏ –¥—Ä—É–≥–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏

### –≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 —á–∞—Å–∞)

#### 2.1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å

1. **–í—ã–±—Ä–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç–µ—Å—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, NowControllerBot)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ Docker:**
   ```bash
   docker compose -f docker-compose.dev.yml up nowcontrollerbot
   ```
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
   - –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É
   - –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### 2.2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

1. **–û—Ç–∫—Ä—ã—Ç—å –∫–æ–¥ –≤ IDE**
2. **–í–Ω–µ—Å—Ç–∏ –Ω–µ–±–æ–ª—å—à–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥)
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```bash
   docker compose -f docker-compose.dev.yml restart nowcontrollerbot
   ```
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å

#### 2.3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ MVP —Å–µ—Ä–≤–∏—Å—ã

- [ ] NowControllerBot
- [ ] Roundsvideobot
- [ ] NowmttBot
- [ ] GSForTextBot
- [ ] ContentFabrikaBot
- [ ] Neurfotobot
- [ ] PereskazNowBot

### –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ workflow (1 —á–∞—Å)

#### 3.1. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/QUICK_START.md` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤ Docker
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞" –≤ `README.md`

#### 3.2. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

- [ ] `config/dev-start.sh` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] `config/dev-stop.sh` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

#### 3.3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ngrok –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac (–Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config/set-webhooks.sh` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ngrok

### –≠—Ç–∞–ø 4: –ú–∏–≥—Ä–∞—Ü–∏—è workflow (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)

#### 4.1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤ Docker

1. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ dev –≤–µ—Ç–∫—É:**
   ```bash
   git checkout dev
   ```

2. **–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ Docker:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   docker compose -f docker-compose.dev.yml up neurfotobot
   
   # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ IDE
   # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ngrok
   ```

3. **–ö–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```bash
   git add .
   git commit -m "feat: ..."
   git push origin dev
   ```

#### 4.2. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

1. **–°–º–µ—Ä–¥–∂–∏—Ç—å dev –≤ prod:**
   ```bash
   git checkout prod
   git merge dev
   git push origin prod
   ```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   git pull origin prod
   docker compose -f docker-compose.prod.yml up -d --build
   ```

### –≠—Ç–∞–ø 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 5.1. Hot Reload

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `watchexec` –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Vapor

#### 5.2. CI/CD (–±—É–¥—É—â–µ–µ)

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥ –ø—Ä–∏ –ø—É—à–µ –≤ prod
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### –ù–∞ Mac:

- [ ] Docker Desktop —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] –ü—Ä–æ–µ–∫—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω/–æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] `config/.env` –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ —Å–æ–∑–¥–∞–Ω—ã:
  ```bash
  mkdir -p Roundsvideobot/Resources/temporaryvideoFiles
  mkdir -p Neurfotobot/tmp
  ```

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:

```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ dev –≤–µ—Ç–∫—É
git checkout dev

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç–µ—Å—Ç–∞
docker compose -f docker-compose.dev.yml up nowcontrollerbot

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose -f docker-compose.dev.yml logs -f nowcontrollerbot

# 4. –ï—Å–ª–∏ –≤—Å—ë –æ–∫ - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose -f docker-compose.dev.yml up
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:

- ‚úÖ –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ Mac –≤ IDE
- ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Linux –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ (Linux)
- ‚úÖ SQLite –±–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ Linux —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ –ü—É—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å:

- ‚ö†Ô∏è **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –Ω—É–∂–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hot reload)
- ‚ö†Ô∏è **ngrok –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ Mac**, –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚ö†Ô∏è **–ë–î –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ Mac (—á–µ—Ä–µ–∑ volumes)
- ‚ö†Ô∏è **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞** –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `Package.swift` –∏–ª–∏ `Dockerfile.dev`

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ volume —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
docker compose -f docker-compose.dev.yml config

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose -f docker-compose.dev.yml restart neurfotobot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
docker compose -f docker-compose.dev.yml exec neurfotobot bash
cd /app
swift build
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–î –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É
ls -la config/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose -f docker-compose.dev.yml logs nowcontrollerbot
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [DEVELOPMENT_IN_DOCKER.md](DEVELOPMENT_IN_DOCKER.md) - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Docker Compose –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.docker.com/compose/)
- [Vapor –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.vapor.codes/)

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

–ú–∏–≥—Ä–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π, –µ—Å–ª–∏:

1. ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ Docker –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
2. ‚úÖ –ö–æ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ IDE –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
3. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
5. ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—É—Ç—è–º–∏, –ë–î, —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

